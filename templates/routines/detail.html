{# routines/detail.html - view a single routine and its steps #}
{% extends 'base.html' %}
{% block title %}Routine Detail - SKYN{% endblock %}
{% block content %}
<div class="container">
    <div class="profile-container">
        <h1 class="page-title">{{ routine.name }}</h1>
        <p class="muted-success">Type: {{ routine.routine_type|title }}</p>

        <div class="form-actions u-margin-top-sm">
            <a href="{% url 'users:profile' %}#add-routine-form" class="btn btn-secondary">Add to Routine</a>
        </div>

        <h2 class="u-margin-top-sm">Steps</h2>
        {% if steps %}
            <form method="post" action="">
                {% csrf_token %}
                <ol>
                {% for step in steps %}
                    <li>
                        <label>
                            <input type="checkbox" name="completed_{{ step.id }}" value="1" {% if step.completed %}checked{% endif %}>
                            {{ step.step_name }}{% if step.frequency %} ({{ step.frequency }}){% endif %}
                        </label>
                    </li>
                {% endfor %}
                </ol>
                <div class="form-actions u-margin-top-sm">
                    <button type="submit" class="btn btn-primary">Save checklist</button>
                </div>
            </form>
        {% else %}
            <p>No steps added to this routine yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
