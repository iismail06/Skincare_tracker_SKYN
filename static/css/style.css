

/* ==========================================================================
   1. CSS VARIABLES & ROOT

   ========================================================================== */
:root {
    /* Base theme colors - light theme defaults */
    --background-color: #ffffff;                       /* for full page background */
    --background-color-rgb: 255, 255, 255;
    --background-color-darker: #f2f2f2;
    --background-color-darker-rgb: 242, 242, 242;
    --background-color-lighter: #fafafa;
    --background-color-lighter-rgb: 250, 250, 250;
    --text: #212121;                                  /* base text color */
    --secondary-color: #555;                          /* secondary text color */
    --secondary-color-lighter: #777;
    --secondary-color-darker: #333;
    --secondary-color-darker-rgb: 51, 51, 51;
    --accent-color: #536b45;                          /* greenish accent color */
    --accent-color-rgb: 83, 107, 69;
    --accent-color-lighter: #687f5c;                  /* lighter accent for hover states */
    
    /* Accent tokens (used across buttons, links, and badges) */
    --accent-color-text: #000000;         /* text color on accent backgrounds (readable contrast) */
    --accent-color-bg: var(--accent-color);                     /* accent background for buttons/badges */
    --accent-color-bg-lighter: var(--accent-color-lighter);     /* softer accent background (subtle states) */
    --accent-color-strong-rgb: 83, 87, 73;                    /* darker greenish for hover tints */

    /* Glass tokens (used by nav, cards, and panels) */
    --glass-bg: rgba(255, 255, 255, 0.35);                      /* more transparent glass for panels */
    --glass-bg-subtle: rgba(255, 255, 255, 0.25);               /* softer glass fill (subtle states or alt panels) */
    --glass-border: rgba(0, 0, 0, 0.08);                        /* outline for glass panels/cards */
    --glass-gradient-top: rgba(255, 255, 255, 0.30);            /* vertical glass sheen */
    --glass-gradient-bottom: rgba(255, 255, 255, 0.18);         /* vertical glass sheen */

    /* Surfaces & borders */
    --card-bg: rgba(255, 255, 255, 0.45); /* more transparent default card background */
    --border: rgba(0, 0, 0, 0.1);      /* generic border color (cards, inputs, separators) */
    --gray: #6c757d;                   /* muted text color (help text, meta labels) */
    --primary: var(--accent-color);     /* alias to accent; used where “primary” is expected by rules */
    
    /* Feedback / status colors */
    --error-color: #d32f2f;         /* error highlights */
    --success-color: #2e7d32;       /* success highlights */

    /* Hero imagery (shared across pages) */
    --site-hero-image: url("https://res.cloudinary.com/di5xhvyrz/image/upload/f_auto,q_auto,w_auto/v1760264510/skyn/hero_image.jpg");
    /* Features imagery (home page features section) - Use Cloudinary URL directly to avoid iCloud optimization issues */
    --features-image: url("https://res.cloudinary.com/di5xhvyrz/image/upload/f_auto,q_auto,w_auto/v1760264512/skyn/feature_image.jpg");

    /* Navbar glass controls (light mode defaults) */
    --navbar-bg-rgb: 0, 0, 0;  /* neutral dark glass in light mode */
    --navbar-opacity: 0.10;    /* slightly more transparent in light mode */
}


/* ==========================================================================
     2. BASIC RESET & LAYOUT
      ========================================================================== */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', sans-serif;
    background-color: var(--background-color);
    color: var(--text);
    line-height: 1.6;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
    /* Use dynamic navbar height with a sensible fallback to minimize gaps */
    padding-top: var(--nav-height, 56px);
}

main {
    flex: 1;
}

/* ========= BOOTSTRAP OVERRIDES - Fix conflicts with our custom design  ================== */

/* Prevent Bootstrap from adding unwanted margins/padding (in use by templates
   listed above; keep to avoid unexpected gutters and max-width caps) */
.container {
    padding-left: 0 !important;
    padding-right: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    max-width: none !important;
}



/* ==========================================================================
   3. TYPOGRAPHY & LINKS
   ========================================================================== */
a {
    text-decoration: none;
    color: var(--secondary-color-darker);
    transition: color 0.3s ease;
}

a:hover {
    color: rgba(8, 6, 4, 0.7);
    cursor: pointer;
}

h1 {
    font-size: 2.5rem;
    font-weight: 700;
}

h2 {
    font-size: 2rem;
    color: var(--text);
}

/* ==========================================================================
   4. SCROLLBAR STYLING
   ========================================================================== */

::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    background: var(--background-color);
    border-radius: 6px;
}

::-webkit-scrollbar-thumb {
    background: #aaaaaa;
    border-radius: 6px;
    border: 3px solid transparent;
    background-clip: content-box;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--accent-color-lighter);
    border-radius: 6px;
    border: 3px solid transparent;
    background-clip: content-box;
}

/* ==========================================================================
    5. NAVIGATION
    ========================================================================== */
/* Base navbar layout (desktop) */
.custom-navbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1100;
    background: rgba(var(--navbar-bg-rgb, 0, 0, 0), var(--navbar-opacity, 0.25));
    /* Standard first, then vendor prefixed for better practices */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

/* Position brand on the left and everything else on the right */
.custom-navbar .nav-container {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0 1rem;
}

.custom-navbar .nav-right {
    display: flex;
    align-items: center;
    gap: 2rem;
    margin-left: auto;
}

.custom-navbar .nav-brand {
    color: #ffffff; /* improve contrast on glass nav in light mode */
    font-size: 1.5rem;
    font-weight: bold;
    flex-shrink: 0; /* Prevent logo from shrinking */
    margin-right: auto;
    display: block;
    text-shadow: none;
}

.custom-navbar .nav-brand:hover {
    color: #ffffff;
    opacity: 0.9;
}

.custom-navbar .nav-links {
    display: flex;
    gap: 0.5rem; /* SMALL gap between navigation links - close together */
    list-style: none;
    margin: 0;
    padding: 0;
    align-items: center;
}

.custom-navbar .nav-links a {
    color: #ffffff; /* white links for readability in light mode */
    padding: 0.5rem 1rem;
    border-radius: 4px;
    transition: color 0.2s ease, background-color 0.2s ease, transform 0.2s ease;
    font-size: 1.1rem;
    display: inline-block;
    text-shadow: 0px 0px 3px rgba(0, 0, 0, 0.5); /* Add shadow for better contrast */
}

.custom-navbar .nav-links a:hover {
    background-color: rgba(255, 255, 255, 0.25);
    color: #ffffff;
    transform: translateY(-2px);
}

/* Hamburger Menu Button */
.custom-navbar .hamburger-menu {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
}

.custom-navbar .hamburger-line {
    width: 25px;
    height: 3px;
    background-color: #ffffff; /* ensure visible on dark glass in light mode */
    margin: 3px 0;
    transition: 0.3s;
    border-radius: 2px;
}

/* Make hamburger button clearly focusable for keyboard users */
.custom-navbar .hamburger-menu:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5);
    border-radius: 6px;
}

/* Theme Toggle Button */
.custom-navbar #theme-toggle {
    background: rgba(255, 255, 255, 0.15);
    border: 2px solid #ffffff;
    color: #ffffff;
    padding: 0.4rem 0.8rem;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    display: inline-block;
    /* Adding standard fallback for browsers without backdrop-filter */
    background-color: rgba(255, 255, 255, 0.5);
}

.custom-navbar #theme-toggle:hover {
    background: rgba(255, 255, 255, 0.3);
    color: #ffffff;
    border-color: #ffffff;
    transform: translateY(-2px);
}

/* Accessible focus styles for keyboard users */
.custom-navbar .nav-links a:focus-visible,
.custom-navbar #theme-toggle:focus-visible {
        outline: none;
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5);
        border-radius: 6px;
}



/* ==========================================================================
   6. HERO SECTION
   ========================================================================== */

.hero-header {
    width: 100%;
    min-height: calc(100svh - var(--nav-height, 56px));
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
    padding: 0;
}

/* Real hero image used as LCP element */
.hero-header .hero-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center 35%;
    z-index: 0;
}

/* Lightweight readability overlay for hero (cheaper than filter()) */
.hero-header::before,
.site-hero-bg::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.25);
    pointer-events: none;
    z-index: 0;
}

.site-hero-bg {
    background-image: var(--site-hero-image);
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center 35%;
    /* Avoid full-surface filter on initial paint; use overlay below */
    position: relative;
    padding: 3rem 0;
    min-height: calc(100vh - 120px);
}

/* Mobile-first: tighten crop further to keep focus on hands/brand area */
@media (max-width: 768px) {
    .hero-header .hero-bg { object-position: center 25%; }
    .hero-header::before { background: rgba(0, 0, 0, 0.35); } /* slightly darker overlay for contrast */
}


/* Keep content readable on the hero background by using a semi-opaque panel */
.site-hero-bg .container {
    background: var(--glass-bg);
    padding: 1.5rem 1.75rem;
    border-radius: 8px;
    box-shadow: none;
    margin: 0 auto; /* ensure hero container centers too */
    position: relative;
    z-index: 1; /* keep content above the overlay */
}

/* Ensure important hero headings remain readable on the hero image. */
.site-hero-bg .page-title,
.site-hero-bg .hero-title,
.site-hero-bg .hero-subtitle,
.site-hero-bg .hero-description {
    color: #ffffff;
    text-shadow: 0 1px 4px rgba(0,0,0,0.45);
}

/* Dark mode: hero content should use theme tokens, not hard-coded white */
body.dark-theme .site-hero-bg .container {
    background: var(--glass-bg) !important;
    color: var(--text) !important;
}
body.dark-theme .site-hero-bg .page-title,
body.dark-theme .site-hero-bg .hero-title,
body.dark-theme .site-hero-bg .hero-subtitle,
body.dark-theme .site-hero-bg .hero-description,
body.dark-theme .site-hero-bg .brand-highlight {
    color: var(--secondary-color-darker) !important;
    text-shadow: none !important;
}


.hero-content {
    position: relative;
    z-index: 1;
    text-align: center;
    color: var(--background-color);
    max-width: 800px;
    padding: 0.5rem; /* Mobile-first */
}

.hero-title {
    font-size: 1.5rem; /* Mobile-first */
    line-height: 1.2;
}

.hero-title::after {
    content: ".";
    animation: period 0.85s step-end infinite;
}

.hero-title:hover .brand-highlight {
    display: none;
}

.hero-title:hover::before {
    content: "skin ";
}

.hero-title:hover:after {
    border-right: 0.15em solid var(--background-color);
    content: "care";
    color: var(--accent-color-text);
    animation: blink 0.85s step-end infinite;
}

.brand-highlight {
    display: inline-block;
    color: #ffffff;
}

.hero-subtitle {
    font-size: 1rem; /* Mobile-first */
    margin-bottom: 2rem;
    opacity: 0.9;
    font-weight: 300;
    color: #ffffff;
    line-height: 1.4;
}

.hero-description {
    font-size: 0.9rem; /* Mobile-first */
    margin-bottom: 2.5rem;
    opacity: 0.8;
    line-height: 1.6;
    color: #ffffff;
}

.hero-actions {
    margin-top: 2rem;
}

.hero-actions h2 {
    font-size: 2rem;
    margin-bottom: 1rem;
    font-weight: 600;
    color: #ffffff;
}

.hero-actions p {
    font-size: 1.1rem;
    margin-bottom: 2rem;
    opacity: 0.8;
    color: #ffffff;
}

.hero-buttons {
    display: flex;
    flex-direction: column; /* Mobile-first */
    align-items: center;
    gap: 0.8rem;
    justify-content: center;
    flex-wrap: wrap;
}

/* Hero Animations */
@keyframes period {
    0%, 49% { opacity: 1; }
    50%, 100% { opacity: 0; }
}

@keyframes blink {
    0%, 49% { border-right-color: transparent; }
    50%, 100% { border-right-color: var(--background-color); }
}

/* ==========================================================================
   7. FEATURES SECTION on homepage
   ========================================================================== */

.features-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    min-height: auto; /* shrink to content height to avoid large bottom gap */
    margin-top: 0.2rem; /* pull up slightly to tighten gap under hero */
    /* Defer rendering until scrolled into view to save main-thread work */
    content-visibility: auto;
    min-height: 600px;
}

.features-section .section-content {
    background: var(--background-color);
    height: auto;
    padding: 0.8rem;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}

.features-section .section-image {
    height: auto; /* match the grid row height determined by content */
    align-self: stretch; /* ensure it stretches to row height */
    min-height: 1px; /* prevent collapse in some browsers */
    width: 100%;
    position: relative;
    background-image: url("https://res.cloudinary.com/di5xhvyrz/image/upload/f_auto,q_auto,w_auto/v1760264512/skyn/feature_image.jpg");
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center center;
    /* keep effects simple to reduce paint cost on low-end devices */
    filter: brightness(90%);
}

.section-content h2 {
    font-size: 2rem;
    color: var(--secondary-color-darker);
    margin-bottom: 2rem;
    text-align: center;
}

.features-list {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.feature-item {
    padding: 1.5rem;
    background: var(--card-bg);
    border-radius: 12px;
    box-shadow: none;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.feature-item:hover {
    transform: translateY(-4px);
    box-shadow: none;
}

.feature-item h3 {
    font-size: 1.3rem;
    margin-bottom: 1rem;
    color: var(--accent-color-text);
}

.feature-item p {
    color: var(--text);
    opacity: 0.8;
    line-height: 1.6;
}

/* ==========================================================================
   8. BUTTONS
   ========================================================================== */


.btn {
    display: inline-block;
    padding: 1.4rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.18s ease, box-shadow 0.18s ease, background-color 0.18s ease;
    text-align: center;
    text-decoration: none;
    margin: 0.25rem 0;
    /* glass base: semi-transparent panel */
    background: linear-gradient(180deg, var(--glass-gradient-top), var(--glass-gradient-bottom));
    border: 1.5px solid var(--accent-color-bg);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

/* Non-primary buttons subtle hover; avoid overriding .btn-primary */
.btn:not(.btn-primary):hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.06);
    background: rgba(var(--accent-color-strong-rgb), 0.06);
    color: var(--accent-color-text);
    border-color: var(--accent-color-bg);
}

/* Accessible focus styles for keyboard users */
.btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(var(--accent-color-strong-rgb), 0.25);
    border-radius: 8px;
}

/* Primary: the prominent filled button used on the home "My Routines" action */
.btn-primary {
    padding: 0.8rem 1.8rem;
    /* transparent glass with accent border/text */
    background: transparent !important; /* override Bootstrap blue */
    color: var(--accent-color-text) !important;
    border: 1.5px solid var(--accent-color-bg) !important;
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 24px rgba(0,0,0,0.10);
    /* darker green hover, avoid any blue tones */
    background: rgba(var(--accent-color-strong-rgb), 0.12) !important; /* enforce greenish hover */
    border-color: var(--accent-color-bg) !important;
    color: var(--accent-color-text) !important;
}

/* Ensure focus/active states stay on our green system (no Bootstrap blue flash) */
.btn-primary:focus,
.btn-primary:active {
    background: rgba(var(--accent-color-strong-rgb), 0.18) !important;
    border-color: var(--accent-color-bg) !important;
    color: var(--accent-color-text) !important;
}

/* Home hero: ensure primary button text is white in light mode for contrast */
.hero-header .btn-primary {
    color: #ffffff !important;
    text-shadow: 0 1px 3px rgba(0,0,0,0.35);
}
.hero-header .btn-primary:hover {
    color: #ffffff !important;
}

/* Keep hero primary readable on focus/active as well */
.hero-header .btn-primary:focus,
.hero-header .btn-primary:active {
    color: #ffffff !important;
}


.btn-secondary {
    /* Minimal override: just use .btn glass effect, only color override if needed */
    color: var(--text) !important;
}

.btn-secondary:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.06);
    background: rgba(var(--accent-color-strong-rgb),0.06);
}

/* Subtle badge hover independent from buttons */

/* Small button variant for inline controls */
.form-card--wide { max-width:600px; margin:2rem auto; }



/* ==========================================================================
   9. AUTHENTICATION PAGES
   ========================================================================== */

.auth-container {
    max-width: 400px;
    margin: 3rem auto;
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.auth-container h1 {
    color: var(--primary);
    margin-bottom: 0.5rem;
    text-align: center;
}

/* Ensure questionnaire action buttons are consistent size */
.questionnaire-actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    justify-content: center;
}
.questionnaire-actions .btn {
    padding: 0.9rem 1.6rem !important; /* normalize vs .btn and .btn-primary */
    min-width: 200px; /* same visual width */
    text-align: center;
}

.auth-container p {
    text-align: center;
    margin-bottom: 1.5rem;
    color: var(--gray);
}

/* Auth/Questionnaire: scoped form controls */
.auth-container form :is(.form-control, input, select, textarea) {
    width: 100%;
    min-height: 44px;
    padding: 0.7rem;
    border: 1.5px solid var(--border);
    border-radius: 8px;
    font-size: 1rem;
    background-color: var(--card-bg);
    color: var(--text);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}
.auth-container form :is(.form-control, input, select, textarea):focus-visible {
    outline: none;
    border-color: var(--accent-color-bg);
    box-shadow: 0 0 0 3px rgba(var(--accent-color-rgb, 150, 154, 139), 0.18);
}
.auth-container form label { display:block; margin-bottom: 0.5rem; font-weight: 600; }
.auth-container form .form-group { margin-bottom: 1.25rem; }
.auth-container form :is(input, textarea)::placeholder { color: var(--gray); opacity: 0.85; }

/* ==========================================================================
    10. MESSAGES
    ========================================================================== */

.messages {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1250; /* above navbar and menus without changing navbar */
    max-height: 50vh; /* prevent tall stacks from going off-screen */
    overflow-y: auto;
    width: min(320px, 90vw); /* narrow and mobile-friendly */
}

/* ==========================================================================
   11. FOOTER
   ========================================================================== */

.footer {
    background-color: rgba(var(--background-color-rgb, 233, 233, 233), 0.65);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    color: var(--secondary-color-darker);
    padding: 2rem 0;
    margin-top: auto;
    box-shadow: 0 -2px 20px rgba(0,0,0,0.1);
    transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
}

.footer-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
}

.footer-social {
    display: flex;
    gap: 1rem;
}

.social-link {
    transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
    padding: 0.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(var(--background-color-darker-rgb, 221, 221, 221), 0.3);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.social-link:hover {
    color: var(--accent-color-text);
    background-color: rgba(var(--accent-color-rgb, 150, 154, 139), 0.3);
    transform: translateY(-2px);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.footer-copyright {
    font-size: 0.9rem;
}

.footer-copyright p {
    margin: 0;
}

/* ==========================================================================
    12. ADD ROUTINE FORM STYLES (includes step items)
    ========================================================================== */
    .step-item {
    --secondary-color-darker-rgb: 8, 6, 4;        /* RGB helper for translucent brand tints */
    --accent-color: #ffffff;                      /* primary accent hue changed to white */
    --accent-color-rgb: 255, 255, 255;            /* RGB helper for accent overlays/shadows (white) */
    --accent-color-lighter: #ffffff;              /* lighter accent also white */
    }

/* Scope base container to the Add Routine page to avoid conflicts with Product forms */
.add-routine-page.form-container,
.add-routine-page .form-container {
    max-width: 680px;
    margin: 0 auto;
    padding: 2rem;
}

/* Panel that wraps the whole page content (inside .container) */
.add-routine-page {
    /* Use a near-solid light panel for strong contrast in light mode */
    background: rgba(255, 255, 255, 0.92) !important;
    color: #1d1d1d;
    border: 1px solid rgba(0, 0, 0, 0.06) !important;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}

/* Card that contains the form */
.add-routine-page .form-card {
    background: rgba(255, 255, 255, 0.96) !important;
    border: 1px solid rgba(0, 0, 0, 0.06) !important;
    border-radius: 10px;
    padding: 2rem;
    box-shadow: 0 8px 24px rgba(0,0,0,0.12);
}

/* Headings, labels and helper text should be clearly legible */
.add-routine-page .page-title,
.add-routine-page h3,
.add-routine-page label,
.add-routine-page .back-link {
    color: #1f1f1f !important;
    text-shadow: none;
}

/* Inputs with solid backgrounds for maximum readability */
.add-routine-page input[type="text"],
.add-routine-page select,
.add-routine-page textarea,
.form-group input,
.form-group select {
    background: #ffffff !important;
    color: #111 !important;
    border: 1.5px solid rgba(0,0,0,0.18) !important;
    border-radius: 8px;
    padding: 0.875rem;
    font-size: 1rem;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

/* Alias Bootstrap/Django forms to page styling */
.add-routine-page .form-control {
    width: 100%;
    min-height: 48px;
    background: #ffffff !important;
    color: #111 !important;
    border: 1.5px solid rgba(0,0,0,0.18) !important;
    border-radius: 8px;
    padding: 0.875rem;
    font-size: 1rem;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.form-group input:focus,
.form-group select:focus,
.add-routine-page textarea:focus {
    outline: none;
    border-color: #676B5D !important;
    box-shadow: 0 0 0 3px rgba(103, 107, 93, 0.25);
}

.form-group input::placeholder,
.add-routine-page textarea::placeholder {
    color: #6b6b6b;
}

.routine-form {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-group label { font-weight: 600; font-size: 1rem; }

/* Step section gets a faint background box so the copy sits on a panel */
.steps-section {
    margin-top: 1rem;
    border: 1px solid rgba(0,0,0,0.08);
    border-radius: 8px;
    padding: 1rem;
    background: rgba(255,255,255,0.9);
}

.steps-section h3 { margin-bottom: 0.5rem; font-size: 1.2rem; }
.steps-help { color: #555; font-size: 0.95rem; margin-bottom: 1rem; }

/* Step items (moved from old Section 11) */
.step-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem 0.75rem;
    background: transparent;
    border-radius: 4px;
    border: 1px solid var(--background-color-darker);
    transition: background-color 0.2s ease;
}

.step-item:hover {
    background: rgba(var(--accent-color-rgb), 0.1);
}

.step-item input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--accent-color);
    flex-shrink: 0;
}

/* Make Step inputs and Product selects the same width/height */
.add-routine-page .step-item :is(input[type="text"], select) {
    width: 100%;
    min-height: 48px;
}


/* Actions area: keep buttons visible and aligned */
.form-actions {
    display: flex;
    gap: 0.75rem;
    justify-content: flex-end;
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(0,0,0,0.06);
}
.add-routine-page .add-routine-btn,
.add-routine-page .edit-btn {
    min-width: 150px;
    padding: 0.7rem 1.1rem;
    border-radius: 8px;
    border: 1.5px solid #676B5D;
    background: transparent;
    color: #1f1f1f;
    transition: transform 0.18s ease, box-shadow 0.18s ease, background-color 0.18s ease;
}
.add-routine-page .add-routine-btn:hover,
.add-routine-page .edit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 24px rgba(0,0,0,0.10);
    background: rgba(103,107,93,0.12);
}

/* Delete button variant used on edit */
.btn-danger-glass { border-color: #d9534f !important; color: #d9534f !important; }



/* ==========================================================================
   13. PRODUCT MANAGEMENT STYLES
   ========================================================================== */

/* Product List & Grid */
.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

/* Stack product cards vertically on products page */
.products-page .products-grid {
    grid-template-columns: 1fr !important;
    max-width: 600px;
    margin: 0 auto; /* center within page */
    padding: 0 1rem; /* side breathing room */
}

/* Match page header width to grid/form and center it */
.products-page .page-header {
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 1.25rem; /* avoid navbar overlap */
    padding: 0 1rem;
}

/* Shared glass card surface used by product elements */
.product-card,
.product-preview,
.warning-message {
    background: var(--card-bg, rgba(255, 255, 255, 0.82));
    border: 1px solid var(--border, rgba(0,0,0,0.08));
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.product-card {
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    position: relative;
}

.product-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
    border-color: rgba(var(--accent-color-rgb, 150, 154, 139), 0.25);
}

/* Subtle accent strip at top of each product card */
.product-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: rgba(var(--accent-color-rgb, 150, 154, 139), 0.18);
    border-radius: 12px 12px 0 0;
}


.product-info h3 {
    color: var(--text);
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.product-info .brand,
.product-details .brand {
    color: var(--accent-color-text);
}

.product-info .brand {
    font-weight: 500;
    font-size: 0.9rem;
    letter-spacing: 0.02em;
    margin-bottom: 0;
    display: inline;
}

.product-type {
    display: inline-block;
    background: var(--accent-color-bg-lighter);
    color: #000000; /* Changed from white to black for better contrast */
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    margin-bottom: 1rem;
}

.product-info .notes {
    color: var(--gray);
    font-size: 0.9rem;
    line-height: 1.45;
    margin: 0.5rem 0 0.75rem 0;
    overflow: hidden;
    max-height: 2.9em; /* Approximately 2 lines of text */
    text-overflow: ellipsis;
    position: relative;
}

.product-actions {
    /* Mobile-first: two-column grid for equal-sized buttons */
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
    margin-top: 0.75rem;
}

.product-actions .btn {
    /* Equal sizing on small screens */
    width: 100%;
    min-width: 0;
    padding: 0.65rem 0.75rem; /* unify heights on small */
    font-size: 0.9rem;
    line-height: 1.2;
    text-align: center;
}


/* Product card header with avatar, title/meta, and corner badges */
.product-card-header {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 0.85rem;
    align-items: center;
    margin-bottom: 0.5rem;
}
.product-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255,255,255,0.6);
    border: 1px solid var(--border);
    color: var(--secondary-color-darker);
    font-weight: 700;
    letter-spacing: 0.02em;
}
.product-title h3 { margin: 0 0 0.15rem 0; }
.product-meta { display: flex; align-items: center; flex-wrap: wrap; gap: 0.25rem; }
.product-meta .brand { margin: 0; }
.product-corner-badges { display: flex; gap: 0.35rem; }
.badge-flag {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 8px;
    background: rgba(255,255,255,0.6);
    border: 1px solid var(--border);
    color: var(--accent-color-text);
}
.badge-flag.favorite { color: #d9534f; }
.badge-flag.expiry { color: #8a6d3b; }

.rating {
    font-size: 0.9rem;
    color: var(--accent-color-text, #000000); /* Added explicit fallback */
}

/* Products page card refinements: brand + badge inline and subtle dot separator */
.products-page .product-info .brand + .product-type.badge-neutral {
    margin-left: 0.5rem;
    vertical-align: baseline;
}
.products-page .product-info .brand + .product-type.badge-neutral::before {
    content: "•";
    margin-right: 0.5rem;
    color: var(--accent-color-text);
    opacity: 0.55;
}

/* Neutral badge for subtle product type tokens */
.badge-neutral {
    background: rgba(var(--accent-color-rgb, 150, 154, 139), 0.08);
    color: var(--accent-color-text);
    border: 1px solid rgba(var(--accent-color-rgb, 150, 154, 139), 0.25);
    font-size: 0.8rem;
    padding: 0.2rem 0.5rem;
    border-radius: 6px;
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 4rem 2rem;
    color: var(--gray);
}

.empty-state i {
    font-size: 4rem;
    margin-bottom: 1rem;
    color: var(--accent-color-text);
}

.empty-state h3 {
    color: var(--text);
    margin-bottom: 1rem;
}

.empty-state p {
    margin-bottom: 2rem;
    font-size: 1.1rem;
}

/* Product Form Styles */
.form-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 2rem;
}

.product-form .form-group {
    margin-bottom: 1.5rem;
}

/* Helper to center form action buttons when desired */
.form-actions.center {
    justify-content: center;
}


/* Delete Confirmation */
.delete-confirmation {
    max-width: 500px;
    margin: 0 auto;
    text-align: center;
}

.product-preview {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
}

.product-details {
    text-align: left;
    flex: 1;
}

.product-details h3 {
    color: var(--text);
    margin-bottom: 0.5rem;
}

.product-details .brand { margin-bottom: 0.5rem; }

.warning-message {
    color: var(--secondary-color-darker);
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 2rem;
}

.warning-message i {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
}

/* Page Header */
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--border);
}

.page-header h1 {
    color: var(--text);
    font-size: 2.5rem;
    font-weight: 700;
}

/* Products pages: ensure header text is readable on hero bg */
.products-page .page-header h1,
.products-page .page-header a.btn {
    color: #ffffff !important;
    text-shadow: 0 1px 4px rgba(0,0,0,0.45);
}

/* Product Info in Routine Steps */
.product-info {
    color: var(--accent-color-text);
    font-size: 0.9rem;
    font-weight: 500;
    margin-left: 0.5rem;
}

/* Button Variants */
.btn-danger {
    /* glass danger variant */
    background: transparent;
    color: #dc3545;
    border: 1.5px solid rgba(220,53,69,0.95);
    box-shadow: 0 6px 16px rgba(220,53,69,0.06);
}

.btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 24px rgba(220,53,69,0.10);
    background: rgba(220,53,69,0.06);
    color: #fff;
}

/* ==========================================================================
   14. PRODUCT FORM STYLES
   ========================================================================== */
.product-suggestions-section {
  margin-bottom: 2rem;
  padding: 1rem;
  border-radius: 8px;
    /* add subtle glass background behind suggestions */
    background: var(--card-bg, rgba(255, 255, 255, 0.82)); /* Fallback for browsers without backdrop-filter */
    border: 1px solid var(--border, rgba(0,0,0,0.08));
    backdrop-filter: blur(8px); /* Standard property first */
    -webkit-backdrop-filter: blur(8px); /* Safari support */
}

.suggestions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1rem;
  margin-top: 1rem;
}

/* Loading and heading helpers used by template */
.suggestions-loading { display: none; text-align: center; padding: 1rem; }
.product-suggestions[aria-hidden="true"] { display: none; }
.suggestions-heading { margin-bottom: 1rem; }
.manual-form-section h3 { margin-bottom: 1rem; color: var(--secondary-color-darker); }
.product-form { margin-top: 1rem; }

/* Product form: base controls and aliases */
.product-form :is(.form-control, input, select, textarea) {
    width: 100%;
    min-height: 48px;
    padding: 0.75rem;
    border: 1.5px solid var(--border);
    border-radius: 8px;
    font-size: 1rem;
    font-family: inherit;
    background-color: var(--card-bg);
    color: var(--text);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}

.product-form :is(.form-control, input, select, textarea):focus-visible {
    outline: none;
    border-color: var(--accent-color-bg);
    box-shadow: 0 0 0 3px rgba(var(--accent-color-rgb, 150, 154, 139), 0.18);
}

.product-form label { display:block; margin-bottom: 0.5rem; font-weight: 600; }

.product-form :is(input, textarea)::placeholder { color: var(--gray); opacity: 0.85; }
.product-form :is(.form-control, input, select, textarea)[disabled] {
    opacity: 0.8;
    background-color: rgba(var(--background-color-rgb, 233,233,233), 0.4);
    cursor: not-allowed;
}

/* Top suggestions select within the suggestions card */
.form-container #category-browse.form-control,
.form-container #category-browse {
    width: 100%;
    min-height: 48px;
    padding: 0.75rem;
    border: 1.5px solid var(--border);
    border-radius: 8px;
    background-color: var(--card-bg);
    color: var(--text);
}
.form-container #category-browse:focus-visible {
    outline: none;
    border-color: var(--accent-color-bg);
    box-shadow: 0 0 0 3px rgba(var(--accent-color-rgb, 150, 154, 139), 0.18);
}

/* Make product form checkboxes clearly visible when toggled */
.product-form input[type="checkbox"] {
    accent-color: var(--accent-color);
    width: 18px;
    height: 18px;
}

/* Inline favorite checkbox style with minimal selectors */
.product-form .checkbox-inline {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    cursor: pointer;
    margin: 0;
    user-select: none;
}
/* Visually hide the native box but keep it accessible */
.product-form .checkbox-inline input[type="checkbox"] {
    position: absolute;
    opacity: 0;
    width: 1px;
    height: 1px;
    margin: 0;
    padding: 0;
    pointer-events: none;
}
/* Show focus on the label text when the (hidden) input is focused */
.product-form .checkbox-inline input[type="checkbox"]:focus-visible + span {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
    border-radius: 4px;
}
/* Checked state: color/bold + star indicator */
.product-form .checkbox-inline input[type="checkbox"]:checked + span {
    color: var(--accent-color);
    font-weight: 600;
}
.product-form .checkbox-inline input[type="checkbox"]:checked + span::before {
    content: "★ ";
    color: var(--accent-color);
    font-weight: 700;
}

/* Slightly larger favorite label text */
.product-form .checkbox-inline span {
    font-size: 1.05em;
}

/* ensure the manual form block has the same glass background */
.manual-form-section {
    background: var(--card-bg, rgba(255, 255, 255, 0.82)); /* Fallback for browsers without backdrop-filter */
    border: 1px solid var(--border, rgba(0,0,0,0.08));
    border-radius: 8px;
    backdrop-filter: blur(8px); /* Standard property first */
    -webkit-backdrop-filter: blur(8px); /* Safari support */
}

.back-link-wrap { margin-bottom: 1rem; }
.back-link { color: var(--secondary-color-darker); font-size: 0.9rem; text-decoration: none; }

/* ==========================================================================
   15. QUESTIONNAIRE PAGE STYLES
   ========================================================================== */
/* Custom inline checkbox alignment for questionnaire */
.checkbox-inline {
    display: flex;
    align-items: center;
    gap: 0.5em;
    margin-bottom: 0.5em;
}
/* Questionnaire button group: equal width and spacing */
.questionnaire-actions {
    display: flex;
    gap: 0.75rem; /* slightly tighter spacing */
    margin-top: 1.5rem;
    justify-content: center; /* center buttons instead of stretching */
    flex-wrap: wrap; /* allow wrapping on smaller widths */
}

/* Questionnaire welcome text should be readable in both modes */
.welcome-text {
    color: #ffffff !important; /* explicit white as requested */
    text-shadow: 0 1px 2px rgba(0,0,0,0.35);
}


/* ==========================================================================
    16. PROFILE PAGE And profile-related components
   ========================================================================== */

/* Page title: softer shadow + faint accent underline */
.profile-container .profile-header-row {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: start;
    gap: 1rem;
}

.profile-container .page-title {
    text-shadow: 0 1px 2px rgba(0,0,0,0.25);
    font-weight: 700;
    margin-bottom: 1.1rem;
    color: var(--text) !important; /* ensure readable title in light mode */
}

.profile-container .page-title::after {
    content: "";
    display: block;
    height: 3px;
    margin: 0.6rem auto 0;
    width: 80px;
    border-radius: 3px;
    background: rgba(var(--accent-color-rgb, 150, 154, 139), 0.25);
}

/* Unify section shells and spacing */
.profile-container .dashboard-section {
    background: var(--card-bg, rgba(255, 255, 255, 0.82)); /* Fallback for browsers without backdrop-filter */
    border: 1px solid var(--border, rgba(0,0,0,0.08));
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    padding: 1.25rem;
    margin: 1.1rem 0;
    backdrop-filter: blur(8px); /* Standard property first */
    -webkit-backdrop-filter: blur(8px); /* Safari support */
}

.profile-container .section-title {
    color: var(--text);
    font-size: 1.35rem;
    font-weight: 600;
    margin: 0 0 0.75rem 0;
}


.profile-container .quick-actions-label {
    color: var(--gray, #666);
    font-size: 0.9rem;
    letter-spacing: 0.02em;
    margin-top: 0.25rem;
}

/* Streak chip: compact glass badge */
.profile-container .streak-card {
    background: var(--card-bg, rgba(255, 255, 255, 0.82));
    border: 1px solid var(--border, rgba(0,0,0,0.08));
    border-radius: 10px;
    padding: 0.45rem 0.8rem;
    box-shadow: 0 2px 10px rgba(0,0,0,0.06);
    min-width: 160px;
    justify-content: center;
}

/* Streak icon sizing moved from inline style in profile.html */
.profile-container .streak-card .streak-icon {
    font-size: 1.3em;
    line-height: 1;
}

/* Journal: glass textarea with accent focus and tidy actions */
.profile-container .journal-textarea {
    background: var(--card-bg, rgba(255, 255, 255, 0.82));
    border: 1px solid var(--border, rgba(0,0,0,0.08));
    color: var(--text);
    min-height: 180px;
}

.profile-container .journal-textarea:focus {
    outline: none;
    border-color: var(--accent-color-bg, #676B5D);
    box-shadow: 0 0 0 3px rgba(var(--accent-color-rgb, 150, 154, 139), 0.12);
}

.profile-container .form-actions-row {
    display: grid;
    grid-template-columns: 1fr; /* Mobile-first stack */
    gap: 0.6rem;
    justify-content: center;
    align-items: center;
}
@media (min-width: 641px) {
    .profile-container .form-actions-row {
        display: flex;
        flex-wrap: wrap; /* let buttons size to content */
    }
}

/* Unified profile button style */
.profile-container .btn-profile,
.profile-container .form-actions-row .add-routine-btn,
.profile-container .form-actions-row .edit-btn,
.profile-container .profile-actions-row .edit-btn,
.profile-container .profile-actions-row .add-routine-btn {
    min-width: 160px;
    height: 44px;
    padding: 0 1rem;
    /* Added explicit fallback values for CSS variables to address validation warnings */
    border: 1.5px solid var(--accent-color-bg, #676B5D) !important;
    background: transparent !important;
    color: var(--accent-color-text, #222) !important;
    border-radius: 10px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.95rem;
    transition: transform 0.18s ease, box-shadow 0.18s ease, background-color 0.18s ease;
}
.profile-container .btn-profile:hover,
.profile-container .btn-profile:focus-visible,
.profile-container .form-actions-row .add-routine-btn:hover,
.profile-container .form-actions-row .add-routine-btn:focus-visible,
.profile-container .form-actions-row .edit-btn:hover,
.profile-container .form-actions-row .edit-btn:focus-visible,
.profile-container .profile-actions-row .edit-btn:hover,
.profile-container .profile-actions-row .edit-btn:focus-visible,
.profile-container .profile-actions-row .add-routine-btn:hover,
.profile-container .profile-actions-row .add-routine-btn:focus-visible {
    transform: translateY(-2px);
    box-shadow: 0 10px 24px rgba(0,0,0,0.10);
    background: rgba(var(--accent-color-rgb, 150, 154, 139), 0.12) !important;
    text-decoration: none;
}

.profile-container .form-actions-row .add-routine-btn:hover,
.profile-container .form-actions-row .edit-btn:hover {
    background: rgba(var(--accent-color-rgb, 150, 154, 139), 0.12) !important;
}

/* Slight extra breathing room for the entire profile container */
.profile-container {
    padding: 1.4rem;
    position: relative; /* allow absolute positioning of streak chip */
}

/* Product widgets: force three compact cards in a row on profile */
.profile-container .product-widgets {
    display: grid;
    grid-template-columns: 1fr; /* Mobile-first */
    gap: 0.8rem;
}
@media (min-width: 600px) {
    .profile-container .product-widgets {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}
@media (min-width: 1200px) {
    .profile-container .product-widgets {
        grid-template-columns: repeat(4, minmax(0, 1fr));
    }
}
.profile-container .product-widget {
    padding: 0.9rem !important;
    border: 1px solid var(--border, rgba(0,0,0,0.1)) !important; /* thinner border */
    box-shadow: 0 2px 10px rgba(0,0,0,0.06);
}
.profile-container .product-widget h4 { font-size: 0.9rem !important; margin-bottom: 0.5rem !important; }
.profile-container .product-mini-card { padding: 0.5rem !important; }
.profile-container .product-name { font-size: 0.85rem !important; }



/* ==========================================================================
   17.  Dark Mode Styles
   ========================================================================== */

body.dark-theme {
    --background-color: #2a2418;
    --background-color-rgb: 42, 36, 24;
    --background-color-darker: #1f1b13;
    --background-color-darker-rgb: 31, 27, 19;
    --text: #f0e6d2;
    --secondary-color: #d4c4a8;
    --secondary-color-lighter: #f0d3bc;
    --secondary-color-darker: #f0e6d2;
    --secondary-color-darker-rgb: 240, 230, 210;
    --accent-color: #35552a; /* darker green */
    --accent-color-rgb: 53, 85, 42;
    --accent-color-lighter: #4a6b3d;
    --accent-color-bg-lighter: #4a6b3d; /* darker but slightly lighter bg variant */
    /* Dark theme accessible tokens */
    --accent-color-text: #e6e8de; /* readable accent text against dark bg */
    --accent-color-bg: #35552a; /* darker accent background in dark mode */
    --error-color: #d32f2f;
    --success-color: #2e7d32;
    /* Dark theme glass overrides */
    --glass-bg: rgba(20,20,20,0.45);
    --glass-border: rgba(255,255,255,0.06);
    --glass-blur: 8px;
    /* dark theme token overrides */
    --border: rgba(255,255,255,0.04);
    --glass-gradient-top: rgba(255,255,255,0.15);
    --glass-gradient-bottom: rgba(255,255,255,0.08);
    --glass-bg-subtle: rgba(255,255,255,0.02);
    --card-bg: rgba(255,255,255,0.02);
    --gray: #bdb6a6;
}
/* Dark theme hero section text colors */
body.dark-theme .hero-title,
body.dark-theme .hero-subtitle,
body.dark-theme .hero-description,
body.dark-theme .brand-highlight {
    color: var(--secondary-color-darker);
}

/* Dramatic difference for navbar between modes */
body.dark-theme {
    --navbar-bg-rgb: 255, 255, 255; /* light glass on dark bg */
    --navbar-opacity: 0.22;         /* more opaque for dark mode for strong separation */
}

/* === adjustments for Navbar === */

/* Dark theme nav links & form inputs: subtle glass accents */
body.dark-theme .custom-navbar .nav-links a {
    background: transparent !important;
    color: var(--text) !important;
    border-radius: 8px !important;
}

/* Keep brand readable in dark mode as well */
body.dark-theme .custom-navbar .nav-brand {
    color: #ffffff !important;
}

body.dark-theme .form-control,
body.dark-theme input[type="text"],
body.dark-theme input[type="password"],
body.dark-theme input[type="email"],
body.dark-theme select {
    background-color: var(--glass-bg-subtle) !important;
    border: 1px solid var(--glass-border) !important;
    color: var(--text) !important;
}
/* stronger glass contrast on key containers */
body.dark-theme .custom-navbar,
body.dark-theme .form-card,
body.dark-theme .form-container,
body.dark-theme .auth-container,
body.dark-theme .card,
body.dark-theme .product-card,
body.dark-theme .dashboard-section {
    background: var(--glass-bg) !important;
    border: 1px solid var(--glass-border) !important;
    box-shadow: 0 6px 20px rgba(0,0,0,0.35) !important;
}


/* ===  for signup form fields === */
body.dark-theme #signup-form input,
body.dark-theme #signup-form textarea,
body.dark-theme #signup-form select {
    background: #fff !important;
    color: #222 !important;
    border: 1.5px solid var(--accent-color, #6c63ff);
}

/* ===  adjustments for Buttons === */

/* Dark mode: All button text should be white for readability */
body.dark-theme .btn,
body.dark-theme .btn-primary,
body.dark-theme .btn-secondary,
body.dark-theme .btn-success,
body.dark-theme .btn-info,
body.dark-theme .btn-warning,
body.dark-theme .btn-light,
body.dark-theme .btn-dark,
body.dark-theme button {
    color: #fff !important;
}
/* Dark theme: ensure primary buttons show with light foreground */
body.dark-theme .btn-primary {
    color: #fff !important;
}

 /* === Add/Edit Routine form ==== */
body.dark-theme .add-routine-page {
    /* Slightly opaque dark panel to lift from background */
    background: rgba(26, 22, 16, 0.92) !important;
    color: var(--text) !important;
    border: 1px solid rgba(255,255,255,0.08) !important;
}

body.dark-theme .add-routine-page .form-card {
    background: rgba(24, 20, 14, 0.96) !important;
    border: 1px solid rgba(255,255,255,0.08) !important;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4) !important;
}

body.dark-theme .add-routine-page .page-title,
body.dark-theme .add-routine-page h3,
body.dark-theme .add-routine-page label,
body.dark-theme .add-routine-page .steps-help,
body.dark-theme .add-routine-page .back-link {
    color: var(--text) !important;
    text-shadow: none !important;
}

/* Inputs/selects within Add Routine: use solid readable backgrounds */
body.dark-theme .add-routine-page input[type="text"],
body.dark-theme .add-routine-page select,
body.dark-theme .add-routine-page textarea,
body.dark-theme .add-routine-page .form-control,
body.dark-theme .add-routine-page .form-group input,
body.dark-theme .add-routine-page .form-group select {
    background: rgba(255,255,255,0.12) !important;
    color: var(--text) !important;
    border: 1.5px solid rgba(255,255,255,0.22) !important;
}

body.dark-theme .add-routine-page .form-group input::placeholder,
body.dark-theme .add-routine-page textarea::placeholder {
    color: rgba(240, 230, 210, 0.75) !important; /* token-aligned soft placeholder */
}

/* Steps container panel with clear separation */
body.dark-theme .add-routine-page .steps-section {
    background: rgba(255,255,255,0.06) !important;
    border: 1px solid rgba(255,255,255,0.12) !important;
}

/* Individual step rows */
body.dark-theme .add-routine-page .step-item {
    background: rgba(255,255,255,0.04) !important;
    border: 1px solid rgba(255,255,255,0.15) !important;
}
body.dark-theme .add-routine-page .step-item:hover {
    background: rgba(255,255,255,0.08) !important;
}

/* Buttons on the form: keep contrast */
body.dark-theme .add-routine-page .add-routine-btn,
body.dark-theme .add-routine-page .edit-btn {
    color: var(--text) !important;
    border-color: rgba(255,255,255,0.35) !important;
    background: rgba(255,255,255,0.08) !important;
}
body.dark-theme .add-routine-page .add-routine-btn:hover,
body.dark-theme .add-routine-page .edit-btn:hover {
    background: rgba(255,255,255,0.14) !important;
}
/* Dark mode: Specific button type adjustments */
body.dark-theme .btn-primary {
    background: var(--accent-color-bg) !important;
    border-color: var(--accent-color-bg) !important;
    color: #fff !important;
}

body.dark-theme .btn-secondary {
    background: var(--glass-bg) !important;
    border-color: var(--glass-border) !important;
    color: #fff !important;
}

/*  make danger buttons readable on dark bg */
body.dark-theme .btn-danger {
    color: #fff !important;
    background: #dc3545 !important;
    border-color: rgba(220,53,69,0.85) !important;
}

/* Dark mode: Success buttons */
body.dark-theme .btn-success {
    color: #fff !important;
    background: var(--success-color) !important;
    border-color: var(--success-color) !important;
}

/* Dark mode: Button hover states */
body.dark-theme .btn:hover,
body.dark-theme .btn-primary:hover,
body.dark-theme .btn-secondary:hover,
body.dark-theme button:hover {
    color: #fff !important;
}

/* Dark mode: Edit, View, Delete buttons specifically */
body.dark-theme .edit-btn,
body.dark-theme .delete-btn,
body.dark-theme .save-btn,
body.dark-theme .cancel-btn {
    color: #fff !important;
}

/* Dark mode: Form action buttons */
body.dark-theme .form-actions .btn,
body.dark-theme .profile-actions .btn,
body.dark-theme .routine-actions .btn {
    color: #fff !important;
}

/* Dark mode: Inline dismiss buttons */
body.dark-theme .inline-dismiss {
    color: #fff !important;
    background: rgba(255,255,255,0.1) !important;
    border-color: rgba(255,255,255,0.2) !important;
}
/* ===  message ===  */

/* Dark theme warning message */
body.dark-theme .warning-message {
    background: #3a3124;
    color: var(--accent-color-lighter);
    border-color: var(--border);
}

/* ===  PROFILE PAGE SPECIFIC STYLES === */

/* Profile container and basic layout */
body.dark-theme .profile-container {
    background: transparent !important;
    border: none !important;
    border-radius: 12px;
    box-shadow: none !important;
}

/* Dark mode: Ensure routines list matches the glass effect */
/* removed: body.dark-theme .routines-list (unused) */

/* Profile page title */
body.dark-theme .profile-container .page-title {
    color: var(--secondary-color-darker) !important;
}

/*  Profile information section */
body.dark-theme .profile-info {
    color: var(--text) !important;
}

body.dark-theme .profile-info p {
    color: var(--text) !important;
}

body.dark-theme .profile-info strong {
    color: var(--secondary-color-darker) !important;
}



/* Inline success messages */
body.dark-theme .inline-success {
    background: var(--glass-bg) !important;
    border: 1px solid var(--glass-border) !important;
    color: var(--text) !important;
}

body.dark-theme .inline-success .muted-success {
    color: var(--accent-color-lighter) !important;
}

body.dark-theme .inline-success strong {
    color: var(--secondary-color-darker) !important;
}

/* Step count and labels in forms */
body.dark-theme .step-count {
    color: var(--accent-color-lighter) !important;
}

/* removed: body.dark-theme .steps-header label (unused) */

/* Step items and selects */
body.dark-theme .step-item select,
body.dark-theme .step-select {
    background: var(--glass-bg-subtle) !important;
    border: 1px solid var(--glass-border) !important;
    color: var(--text) !important;
}

body.dark-theme .step-item select option,
body.dark-theme .step-select option {
    background: var(--background-color-darker) !important;
    color: var(--text) !important;
}

/* Edit form content */
/* removed: body.dark-theme .edit-form-content and label (unused) */

/* Form labels and inputs in profile forms */
body.dark-theme .form-card label {
    color: var(--text) !important;
}

body.dark-theme .form-card input[type="text"],
body.dark-theme .form-card select,
body.dark-theme .form-card textarea {
    background: var(--glass-bg-subtle) !important;
    border: 1px solid var(--glass-border) !important;
    color: var(--text) !important;
}

/* Dropdown input wrapper */
body.dark-theme .dropdown-input-wrap input {
    background: var(--glass-bg-subtle) !important;
    border: 1px solid var(--glass-border) !important;
    color: var(--text) !important;
}

body.dark-theme .dropdown-arrow {
    color: var(--text) !important;
}

/* Badges and success elements */
body.dark-theme .badge {
    background: var(--accent-color-bg) !important;
    color: var(--background-color) !important;
}

body.dark-theme .badge.success {
    background: var(--success-color) !important;
    color: #fff !important;
}

/* ==========================================================================
   18. RESPONSIVE DESIGN - ALL MEDIA QUERIES
   ========================================================================== */
/*
    Mobile-first responsive strategy
    Breakpoints (min-width unless stated):
        - 480px   (small mobile adjustments)
        - 600px   (small tablet / large mobile)
        - 640px   (compact tablets)
        - 768px   (tablet)
        - 900px   (wider tablets)
        - 992px   (desktop)
        - 1200px  (large desktop)
    Note: Navigation currently retains some max-width rules for safer incremental migration.
*/


/* Mobile Navigation Styles */
/* Quick actions: mobile-first stacked; inline at >=641px */
.profile-container .profile-actions-row {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.6rem;
}
@media (min-width: 641px) {
    .profile-container .profile-actions-row {
        display: flex;
        justify-content: center;
    }
}
@media (max-width: 768px) {
    .custom-navbar .nav-container {
        padding: 0 1rem;
    }
    
    .custom-navbar .nav-right {
        gap: 1rem;
    }
    
    .custom-navbar .hamburger-menu {
        display: flex;
        position: relative; /* ensure z-index applies */
        z-index: 1300;      /* above the nav-links overlay (1200) */
    }
    
    .custom-navbar .nav-links {
        position: fixed;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100vh;
        z-index: 1200;
        background-color: rgba(var(--background-color-rgb, 233, 233, 233), 0.98); /* Solid fallback for browsers without backdrop-filter */
        backdrop-filter: blur(20px); /* Standard property first */
        -webkit-backdrop-filter: blur(20px); /* Safari support */
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transition: left 0.3s ease;
        gap: 2rem;
    }
    
    .custom-navbar .nav-links.active {
        left: 0;
    }
    
    .custom-navbar .nav-links a {
        font-size: 1.3rem;
        padding: 1rem 2rem;
        width: 200px;
        text-align: center;
        border-radius: 8px;
        background-color: rgba(var(--background-color-darker-rgb, 221, 221, 221), 0.5);
        color: var(--secondary-color-darker); /* dark text against light panel */
        margin: 0.5rem 0;
    }
    
    .custom-navbar .nav-links a:hover {
        transform: scale(1.05);
        /* Added explicit RGB fallback for CSS variables */
        background-color: rgba(var(--accent-color-rgb, 150, 154, 139), 0.8);
    }
    
    /* Hamburger animation when active */
    .custom-navbar .hamburger-menu.active .hamburger-line:nth-child(1) {
        /* Standard CSS transform that doesn't rely on CSS variables */
        transform: rotate(-45deg) translate(-6px, 6px);
    }
    
    .custom-navbar .hamburger-menu.active .hamburger-line:nth-child(2) {
        opacity: 0;
    }
    
    .custom-navbar .hamburger-menu.active .hamburger-line:nth-child(3) {
        transform: rotate(45deg) translate(-6px, -6px);
    }

    /* When menu is open on light overlay, use dark lines for contrast */
    .custom-navbar .hamburger-menu.active .hamburger-line {
        background-color: var(--secondary-color-darker);
    }
    
    .custom-navbar #theme-toggle {
        font-size: 0.8rem;
        padding: 0.3rem 0.6rem;
    }

    /* Ensure focus ring is visible on light mobile overlay */
    .custom-navbar .nav-links a:focus-visible {
        box-shadow: 0 0 0 3px rgba(var(--accent-color-strong-rgb), 0.4);
    }
}

/* profile widgets grid is now mobile-first; removed older width-specific blocks */

/* Profile: mobile-friendly header layout (buttons now mobile-first at base) */
@media (max-width: 640px) {
    .profile-container .profile-header-row {
        grid-template-columns: 1fr;
        gap: 0.75rem;
    }
}


@media (max-width: 480px) {
    .custom-navbar .nav-container {
        padding: 0 0.5rem !important;
    }
    
    .custom-navbar .nav-brand {
        font-size: 1.3rem !important;
    }
    
    .custom-navbar .nav-links a {
        width: 170px !important;
        font-size: 1.2rem !important;
    }
}

/* Small Tablet and Large Mobile (600px and up) */
@media only screen and (min-width: 600px) {
    .hero-title {
        font-size: 1.8rem;
    }
    
    .hero-content {
        padding: 2rem;
    }
    
    .features-section .section-content {
        padding: 4rem;
    }
}

/* Tablet (768px and up) */
@media only screen and (min-width: 768px) {
    .hero-title {
        font-size: 2.5rem;
    }
    
    .hero-subtitle {
        font-size: 1.1rem;
    }
    
    .hero-description {
        font-size: 1rem;
    }
    
    .hero-content {
        padding: 2rem;
    }
    
    .hero-buttons {
        flex-direction: row;
        gap: 1rem;
    }
    
    .btn-primary, .btn-secondary {
        width: auto;
    }
    
    .features-section {
        grid-template-columns: 1fr 1fr;
        margin-top: 2rem;
    }
    
    .features-section .section-content {
        padding: 4rem;
    }
}

/* Desktop (992px and up) */
@media only screen and (min-width: 992px) {
    .hero-title {
        font-size: 3rem;
    }
    
    .hero-content {
        padding: 3rem;
    }
    
    .features-section .section-content {
        padding: 3rem;
    }
}

/* Large Desktop (1200px and up) */
@media only screen and (min-width: 1200px) {
    .hero-title { font-size: 3.5rem; }
    .hero-content { padding: 4rem; }
    .features-section .section-content { padding: 6rem; }
}

/* Tablet (max-width: 768px) */
@media (max-width: 768px) {
    
    .form-container {
        padding: 1rem;
    }
    
    .form-card {
        padding: 1.5rem;
    }
    
    .form-actions {
        flex-direction: column-reverse;
    }
    
    /* Products */
    .products-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .page-header {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
    }
    
    .product-preview {
        flex-direction: column;
        text-align: center;
    }
    
    .product-details {
        text-align: center;
    }
    
    /* product-actions layout set at <=640px */
}

/* Mobile (max-width: 600px) */
@media (max-width: 600px) {
    /* Hero: base styles already set for mobile-first */
    
    .btn-primary, .btn-secondary {
        width: 100%;
        max-width: 280px;
    }
    
    /* Features */
    .features-section {
        grid-template-columns: 1fr;
        margin-top: 0.25rem; /* smaller gap under hero on mobile */
    }
    
    /* Allow natural heights on mobile; page will scroll as needed */
    .features-section .section-image { height: auto; }
    .features-section .section-content { height: auto; padding: 0.8rem; }
    
    .features-section .section-content {
        padding: 5vw;
    }
    
    /* Typography */
    h2 {
        font-size: 1rem;
    }
    
    /* Footer */
    .footer-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
        padding: 0 1rem;
    }
    
    .footer-social {
        order: 2;
    }
    
    .footer-copyright {
        order: 1;
    }
    
    /* Forms */
    .form-card {
        padding: 1.5rem;
        margin-bottom: 2rem;
    }
    
    .form-actions .btn {
        width: 100%;
    }
}

/* Small Mobile (max-width: 480px) */
@media (max-width: 480px) {
    /* Products */
    .form-container {
        padding: 1rem;
    }
    
    .product-card {
        padding: 1rem;
    }
    
    .empty-state {
        padding: 2rem 1rem;
    }
    
    .empty-state i {
        font-size: 3rem;
    }
}


@media (min-width: 641px) {
    .product-actions {
        display: flex;
        gap: 0.5rem;
    }
    .product-actions .btn {
        /* Restore desktop behavior */
        width: auto;
        padding: 1.4rem; /* match base .btn padding */
        flex: 1;
    }
}

/* ==========================================================================
   CSS VALIDATION NOTES - SUMMARY
   ========================================================================== */
/* 
   This stylesheet uses several modern CSS features that may trigger validator warnings:
   
   1. CSS VARIABLES (Custom Properties)
      - Most "Due to their dynamic nature, CSS variables are currently not statically checked" 
        warnings are expected and don't affect functionality
      - We've added explicit fallbacks where possible: var(--property-name, #fallback-value)
      - All variables are defined in :root with documentation
   
   2. VENDOR PREFIXES
      - For backdrop-filter, we use the standard property first, followed by the vendor prefix
        and provide solid background fallbacks
      - For scrollbars, we use vendor-specific selectors as there is no standard alternative yet
      - For text truncation, we use max-height and overflow:hidden instead of vendor-prefixed
        properties to ensure better W3C validation
   
   3. COLOR CONTRAST
      - We ensure text has sufficient contrast with backgrounds
      - For buttons and borders, we use distinct colors or transparency
   
   These practices ensure our stylesheet is both modern and compatible across browsers.
*/